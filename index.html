<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="MetALD-ALD Prediction Index (MAPI) Calculator" />
    <title>MetALD-ALD Prediction Index (MAPI)</title>
    <link rel="icon" href="favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet" />
    <!-- MathJax for LaTeX formatting -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body id="page-top">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
      <div class="container px-4">
        <a href="#" class="navbar-left me-2">
          <img src="favicon.ico" alt="favicon" />
        </a>
        <a class="navbar-brand" href="#">MAPI Calculator</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="#calculator">Calculator</a></li>
            <li class="nav-item"><a class="nav-link" href="#overview">Overview</a></li>
            <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
            <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Header / Calculator Section -->
    <header class="bg-primary bg-gradient text-white pt-5" id="calculator">
      <div class="container py-5">
        <h1 class="fw-bold text-center mb-4">MetALD-ALD Prediction Index (MAPI)</h1>
        <form id="mapiForm" class="row g-3 text-dark bg-light p-4 rounded shadow">
          <!-- Sex -->
          <div class="col-12">
            <label class="form-label fw-bold">Sex</label>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="sex" id="sex_female" value="1" checked>
              <label class="form-check-label" for="sex_female">Female</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="sex" id="sex_male" value="0">
              <label class="form-check-label" for="sex_male">Male</label>
            </div>
          </div>

          <!-- MCV -->
          <div class="col-md-6">
            <label for="mcv" class="form-label fw-bold">MCV (fL)</label>
            <input type="number" class="form-control" id="mcv" placeholder="e.g. 90">
          </div>

          <!-- GGT -->
          <div class="col-md-6">
            <label for="ggt" class="form-label fw-bold">GGT</label>
            <input type="number" class="form-control" id="ggt" placeholder="e.g. 120">
            <div class="mt-2">
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="ggt_unit" id="ggt_ul" value="ul" checked>
                <label class="form-check-label" for="ggt_ul">U/L</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="ggt_unit" id="ggt_ukat" value="ukat">
                <label class="form-check-label" for="ggt_ukat">µkat/L</label>
              </div>
            </div>
          </div>

          <!-- HDL-C -->
          <div class="col-md-6">
            <label for="hdl" class="form-label fw-bold">HDL-C</label>
            <input type="number" class="form-control" id="hdl" placeholder="e.g. 50">
            <div class="mt-2">
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="hdl_unit" id="hdl_mgdl" value="mgdl" checked>
                <label class="form-check-label" for="hdl_mgdl">mg/dL</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="hdl_unit" id="hdl_mmoll" value="mmoll">
                <label class="form-check-label" for="hdl_mmoll">mmol/L</label>
              </div>
            </div>
          </div>

          <!-- HbA1c -->
          <div class="col-md-6">
            <label for="hba1c" class="form-label fw-bold">HbA1c</label>
            <input type="number" class="form-control" id="hba1c" placeholder="e.g. 5.5">
            <div class="mt-2">
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="hba1c_unit" id="hba1c_percent" value="percent" checked>
                <label class="form-check-label" for="hba1c_percent">%</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="hba1c_unit" id="hba1c_mmoll" value="mmoll">
                <label class="form-check-label" for="hba1c_mmoll">mmol/mol</label>
              </div>
            </div>
          </div>

          <!-- Calculate Button -->
          <div class="col-12 text-center">
            <button type="button" class="btn btn-success" onclick="calculateMAPI()">Calculate MAPI</button>
          </div>

          <!-- Result Display -->
          <div class="col-12">
            <h4 class="text-center text-dark mt-3" id="mapi_result"></h4>
          </div>
        </form>

        <!-- Disclaimer -->
        <p class="mt-4 text-white text-center">
          <strong>Disclaimer:</strong> This tool is intended for research and educational purposes only and is not approved or certified as a medical device. The creators assume no responsibility for any clinical use or for the interpretation of results generated by this algorithm.
        </p>
      </div>
    </header>

    <!-- Overview Section -->
    <section id="overview" class="py-5 bg-light">
      <div class="container">
        <h2 class="fw-bold mb-4">Overview</h2>
        <p>This calculator estimates the predicted probability of MetALD-ALD using the following formula:</p>
        <!-- MathJax block for proper formula formatting -->
        <p>
          $$\text{MAPI} = \frac{e^{lp}}{1+e^{lp}}$$
          $$lp = -31.679 - 1.323\times\text{Sex (female=1, male=0)} + 6.347\times\ln\left(\text{MCV [fL]}\right)$$
          $$\quad + 0.583\times\ln\left(\text{GGT [U/L]}\right) + 1.934\times\ln\left(\text{HDL-C [mg/dL]}\right)
          - 4.109\times\ln\left(\text{HbA1c [%]}\right)$$
        </p>
        <p>
          The units for GGT, HDL-C, and HbA1c can be toggled, and unit conversion is performed automatically.
        </p>
        <div class="table-responsive">
          <table class="table table-bordered">
            <thead>
              <tr class="table-primary">
                <th>Parameter</th>
                <th>Unit Options</th>
                <th>Conversion Formula (if applicable)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>GGT</td>
                <td>U/L, µkat/L</td>
                <td>GGT (U/L) = GGT (µkat/L) × 60</td>
              </tr>
              <tr>
                <td>HDL-C</td>
                <td>mg/dL, mmol/L</td>
                <td>HDL-C (mg/dL) = HDL-C (mmol/L) × 38.67</td>
              </tr>
              <tr>
                <td>HbA1c</td>
                <td>%, mmol/mol</td>
                <td>HbA1c (%) = (HbA1c (mmol/mol) / 10.929) + 2.15</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- INSERTED TEXT FROM text.docx BEGINS HERE -->
    <section id="overview2" class="py-5 bg-light">
      <div class="container">
        <h2>Overview</h2>
        <p><strong>Patient Population for Testing</strong></p>
        <p>Individuals with steatotic liver disease (by imaging or biopsy) and ≥1 cardiometabolic risk factors* (2023 AASLD-EASL-ALEH Delphi consensus statement) who require differentiation between MASLD and MetALD-ALD, particularly in settings where alcohol use may be underreported.</p>
        <p><strong>Cardiometabolic risk factors*:</strong></p>
        <p>BMI ≥ 25 kg/m [23 Asia] OR waist circumference > 94 cm (M) 80 cm (F) OR ethnicity adjusted</p>
        <p>Fasting serum glucose ≥ 5.6 mmol/L [100 mg/dL] OR 2-hour post-load glucose levels ≥ 7.8 mmol/L [≥140 mg/dL] OR HbA1c ≥ 5.7% [39 mmol/L] OR type 2 diabetes OR treatment for type 2 diabetes</p>
        <p>Blood pressure ≥ 130/85 mmHg OR specific antihypertensive drug treatment</p>
        <p>Plasma triglycerides ≥ 1.70 mmol/L [150 mg/dL] OR lipid lowering treatment</p>
        <p>Plasma HDL-cholesterol ≤ 1.0 mmol/L [40 mg/dL] (M) and ≤ 1.3 mmol/L [50 mg/dL] (F) OR lipid lowering treatment</p>

        <p><strong>Outcome</strong></p>
        <p>PEth-MetALD-ALD vs PEth-MASLD</p>

        <p><strong>Definition of SLD subcategories incorporating PEth testing*</strong></p>
        <p><strong>PEth-MASLD*</strong><br>MASLD diagnosis with PEth &lt;35 ng/mL (&lt;0.05 µmol/L)</p>
        <p><strong>PEth-MetALD*</strong><br>MetALD diagnosis with PEth &lt;200 ng/mL (&lt;0.27 µmol/L) OR MASLD diagnosis with PEth between 35–200 ng/mL (0.05-0.27 µmol/L)</p>
        <p><strong>PEth-ALD*</strong><br>ALD diagnosis (regardless of PEth) OR MASLD/MetALD diagnosis with PEth ≥200 ng/mL (≥0.27 µmol/L)</p>
        <p>*We revised the 2023 classification of SLD subcategories by incorporating PEth alongside self-reported alcohol use, specifically in cases of underreporting discrepancy, to enhance precision and minimize misclassification due to alcohol underreporting.</p>

        <p><strong>Formula</strong></p>
        <p>The MAPI model was developed and internally validated using a stepwise logistic regression framework combined with bootstrap resampling (2,000 bootstrap samples). The derivation cohort included 503 community-dwelling individuals with overweight or obesity from the San Diego Liver Study. The final model was calculated by combining the selected predictors weighted by their regression coefficients. Model discrimination was evaluated by calculating the area under the receiver operating characteristic curve (AUROC). Diagnostic cut-offs were derived based on sensitivity ≥0.90 (rule-out), specificity ≥0.90 (rule-in), and the Youden index (optimal cut-off maximizing sensitivity and specificity). The model was externally validated in an independent cohort, HERALD, which comprised 1,777 Swedish individuals from the general population.</p>

        <p><strong>Interpretation</strong></p>
        <p>MAPI represents a predicted probability score and ranges from 0 to 1. For example, a MAPI value of 0.10 corresponds to a 10% predicted probability of MetALD-ALD.</p>

        <h3>Performance and Cut-offs</h3>
        <div class="table-responsive">
          <table class="table table-bordered">
            <thead>
              <tr>
                <th></th>
                <th>SDLS</th>
                <th>HERALD</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>N</td>
                <td>503</td>
                <td>1,777</td>
              </tr>
              <tr>
                <td>PEth-MetALD-ALD, n (%)</td>
                <td>95 (19%)</td>
                <td>628 (35%)</td>
              </tr>
              <tr>
                <td>MAPI AUROC (95% CI)</td>
                <td>0.76 (0.71-0.82)</td>
                <td>0.75 (0.73-0.78)</td>
              </tr>
              <tr>
                <td>MAPI ≥0.25 (Youden index)</td>
                <td>n (%)<br>140 (28%)</td>
                <td>n (%)<br>619 (35%)</td>
              </tr>
              <tr>
                <td>Accuracy</td>
                <td>0.76</td>
                <td>0.71</td>
              </tr>
              <tr>
                <td>Sensitivity</td>
                <td>0.60</td>
                <td>0.58</td>
              </tr>
              <tr>
                <td>Specificity</td>
                <td>0.80</td>
                <td>0.78</td>
              </tr>
              <tr>
                <td>PPV</td>
                <td>0.41</td>
                <td>0.59</td>
              </tr>
              <tr>
                <td>NPV</td>
                <td>0.90</td>
                <td>0.78</td>
              </tr>
              <tr>
                <td>MAPI ≤0.09 (Rule-out zone)</td>
                <td>n (%)<br>160 (32%)</td>
                <td>n (%)<br>558 (31%)</td>
              </tr>
              <tr>
                <td>Accuracy</td>
                <td>0.47</td>
                <td>0.64</td>
              </tr>
              <tr>
                <td>Sensitivity</td>
                <td>0.91</td>
                <td>0.84</td>
              </tr>
              <tr>
                <td>Specificity</td>
                <td>0.37</td>
                <td>0.44</td>
              </tr>
              <tr>
                <td>PPV</td>
                <td>0.25</td>
                <td>0.41</td>
              </tr>
              <tr>
                <td>NPV</td>
                <td>0.94</td>
                <td>0.86</td>
              </tr>
              <tr>
                <td>MAPI ≥0.33 (Rule-in zone)</td>
                <td>n (%)<br>80 (16%)</td>
                <td>n (%)<br>448 (25%)</td>
              </tr>
              <tr>
                <td>Accuracy</td>
                <td>0.82</td>
                <td>0.74</td>
              </tr>
              <tr>
                <td>Sensitivity</td>
                <td>0.44</td>
                <td>0.48</td>
              </tr>
              <tr>
                <td>Specificity</td>
                <td>0.91</td>
                <td>0.88</td>
              </tr>
              <tr>
                <td>PPV</td>
                <td>0.53</td>
                <td>0.67</td>
              </tr>
              <tr>
                <td>NPV</td>
                <td>0.87</td>
                <td>0.76</td>
              </tr>
            </tbody>
          </table>
        </div>

        <p><strong>Contact us</strong></p>
        <p>
          Rohit Loomba, MD, MHSc<br>
          Professor of Medicine<br>
          Chief, Division of Gastroenterology and Hepatology<br>
          Director, MASLD Research Center<br>
          University of California at San Diego<br>
          ACTRI Building, 1W202<br>
          9500 Gilman Drive<br>
          La Jolla, CA, 92093-0887<br>
          Email: roloomba@health.ucsd.edu
        </p>
      </div>
    </section>
    <!-- INSERTED TEXT FROM text.docx ENDS HERE -->

    <!-- Contact Section -->
    <section id="contact" class="py-5">
      <div class="container">
        <h2 class="fw-bold mb-4">Contact Us</h2>
        <p>
          Stefano Romeo, MD, PhD<br>
          Professor in Molecular and Clinical Medicine<br>
          University of Gothenburg, Institute of Medicine, Sahlgrenska Academy<br>
          Wallenberg Laboratory, Bruna Stråket 16<br>
          41345 Gothenburg, Sweden<br>
          Email: stefano [dot] romeo [at] wlab [dot] gu [dot] se
        </p>
      </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-5 bg-light">
      <div class="container">
        <h2 class="fw-bold mb-4">About This Page</h2>
        <p>This page was designed to provide a simple online calculator based on logistic regression for predicting the probability of MetALD-ALD. It is intended for academic research purposes only.</p>
      </div>
    </section>

    <!-- Footer -->
    <footer class="py-5 bg-dark">
      <div class="container text-center">
        <p class="m-0 text-white">Copyright &copy; MAPI Calculator 2021</p>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/scripts.js"></script>
  </body>
</html>
